if [ -f ~/.aliases ]; then
  . ~/.aliases
fi

# API keys, specific computer stuff (work vs. personal)
if [ -f ~/.env ]; then
  . ~/.env
fi

if [ -f ~/.git-completion.bash ]; then
  . ~/.git-completion.bash
fi

# work specific stuff
if [ -f ~/.work.sh ]; then
  . ~/.work.sh
fi

# The following lines were added by compinstall

zstyle ':completion:*' completer _complete _ignored
zstyle :compinstall filename "$HOME/.zshrc"

autoload -Uz compinit
compinit
# End of lines added by compinstall

export VISUAL=nvim
export EDITOR=$VISUAL

git_branch() {
  git symbolic-ref --short HEAD 2> /dev/null
}

current_path() {
  pwd | sed "s|/Users/${whoami}|~|"
}

ruby_version() {
  (devbox info ruby 2>/dev/null || asdf current ruby) | head -n1 | awk '{print $2}'
}

node_version() {
  (devbox info nodejs 2>/dev/null || asdf current nodejs) | head -n1 | awk '{print $2}'
}

has_devbox() {
  if [ -f devbox.json ]; then
    echo "%F{cyan}î™%F{white}"
  fi
}

NEWLINE=$'\n'
PROMPT_TIME='%F{green}%D%F{yellow} %T%F{grey}'
PS1_EMOJIS=("ðŸ˜€" "ðŸ˜ƒ" "ðŸ˜„" "ðŸ˜" "ðŸ˜†" "ðŸ˜…" "ðŸ¤£" "ðŸ˜‚" "ðŸ™‚" "ðŸ™ƒ" "ðŸ˜‰" "ðŸ˜Š" "ðŸ˜‡" "ðŸ˜" "ðŸ˜˜" "ðŸ˜—" "ðŸ˜š" "ðŸ˜™" "ðŸ˜‹" "ðŸ˜›" "ðŸ˜œ" "ðŸ˜" "ðŸ¤‘" "ðŸ¤—" "ðŸ¤”" "ðŸ¤" "ðŸ˜" "ðŸ˜‘" "ðŸ˜¶" "ðŸ˜" "ðŸ˜’" "ðŸ™„" "ðŸ˜¬" "ðŸ¤¥" "ðŸ˜Œ" "ðŸ˜”" "ðŸ˜ª" "ðŸ¤¤" "ðŸ˜´" "ðŸ˜·" "ðŸ¤’" "ðŸ¤•" "ðŸ¤¢" "ðŸ¤§" "ðŸ˜µ" "ðŸ¤ " "ðŸ˜Ž" "ðŸ¤“" "ðŸ˜•" "ðŸ˜Ÿ" "ðŸ™" "ðŸ˜®" "ðŸ˜¯" "ðŸ˜²" "ðŸ˜³" "ðŸ˜¦" "ðŸ˜§" "ðŸ˜¨" "ðŸ˜°" "ðŸ˜¥" "ðŸ˜¢" "ðŸ˜­" "ðŸ˜±" "ðŸ˜–" "ðŸ˜£" "ðŸ˜ž" "ðŸ˜“" "ðŸ˜©" "ðŸ˜«" "ðŸ˜¤" "ðŸ˜¡" "ðŸ˜ " "ðŸ˜ˆ" "ðŸ‘¿" "ðŸ’€" "ðŸ’©" "ðŸ¤¡" "ðŸ‘¹" "ðŸ‘º" "ðŸ‘»" "ðŸ‘½" "ðŸ¤–" "ðŸ˜º" "ðŸ˜¸" "ðŸ˜¹" "ðŸ˜»" "ðŸ˜¼" "ðŸ˜½" "ðŸ™€" "ðŸ˜¿" "ðŸ˜¾" "ðŸ™ˆ" "ðŸ™‰" "ðŸ™Š" "ðŸ’‹" "ðŸ’Œ" "ðŸ’˜" "ðŸ’" "ðŸ’–" "ðŸ’—" "ðŸ’“" "ðŸ’ž" "ðŸ’•" "ðŸ’Ÿ" "ðŸ’”" "ðŸ’›" "ðŸ’š" "ðŸ’™" "ðŸ’œ" "ðŸ’¥" "ðŸ’«" "ðŸ’¦" "ðŸ’¨" "ðŸ’¬" "ðŸ’­" "ðŸ’¤" "ðŸ‘‹" "ðŸ¤š" "âœ‹" "ðŸ––" "ðŸ‘Œ" "ðŸ¤ž" "ðŸ¤˜" "ðŸ¤™" "ðŸ‘ˆ" "ðŸ‘‰" "ðŸ‘†" "ðŸ–•" "ðŸ‘‡" "ðŸ‘" "ðŸ‘Ž" "âœŠ" "ðŸ‘Š" "ðŸ¤›" "ðŸ¤œ" "ðŸ‘" "ðŸ™Œ" "ðŸ‘" "ðŸ¤" "ðŸ™" "ðŸ’…" "ðŸ¤³" "ðŸ’ª" "ðŸ‘‚" "ðŸ‘€" "ðŸ‘…" "ðŸ‘„" "ðŸ‘¶" "ðŸ‘¦" "ðŸ‘§" "ðŸ‘±" "ðŸ‘¨" "ðŸ‘±" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘±" "ðŸ‘©" "ðŸ‘©" "ðŸ‘©" "ðŸ‘©" "ðŸ‘´" "ðŸ‘µ" "ðŸ™‡" "ðŸ™‡" "ðŸ¤¦" "ðŸ¤¦" "ðŸ¤¦" "ðŸ¤·" "ðŸ¤·" "ðŸ¤·" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘©" "ðŸƒ" "ðŸƒ" "ðŸ’ƒ" "ðŸ•º" "ðŸ‘¯" "ðŸ‘¯" "ðŸ‘¯" "ðŸ¤º" "ðŸ‡" "ðŸš£" "ðŸš£" "ðŸš£" "ðŸŠ" "ðŸŠ" "ðŸŠ" "ðŸš´" "ðŸš´" "ðŸš´" "ðŸšµ" "ðŸšµ" "ðŸšµ" "ðŸ¤¸" "ðŸ¤¸" "ðŸ¤¸" "ðŸ¤¼" "ðŸ¤¼" "ðŸ¤¼" "ðŸ¤½" "ðŸ¤½" "ðŸ¤½" "ðŸ¤¾" "ðŸ¤¾" "ðŸ¤¾" "ðŸ¤¹" "ðŸ¤¹" "ðŸ¤¹" "ðŸ›€" "ðŸ›Œ" "ðŸ‘«" "ðŸ‘¬" "ðŸ’" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ’‘" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘ª" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘©" "ðŸ‘©" "ðŸ‘©" "ðŸ‘©" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘¨" "ðŸ‘©" "ðŸ‘©" "ðŸ‘©" "ðŸ‘©" "ðŸ‘©" "ðŸµ" "ðŸ’" "ðŸ¦" "ðŸ•" "ðŸº" "ðŸ¦Š" "ðŸ±" "ðŸˆ" "ðŸ¦" "ðŸ¯" "ðŸ…" "ðŸ†" "ðŸ´" "ðŸŽ" "ðŸ¦„" "ðŸ¦Œ" "ðŸ®" "ðŸ‚" "ðŸ„" "ðŸ·" "ðŸ–" "ðŸ—" "ðŸ½" "ðŸ" "ðŸ‘" "ðŸ" "ðŸª" "ðŸ«" "ðŸ˜" "ðŸ¦" "ðŸ­" "ðŸ" "ðŸ€" "ðŸ¹" "ðŸ°" "ðŸ‡" "ðŸ»" "ðŸ¨" "ðŸ¼" "ðŸ¦ƒ" "ðŸ”" "ðŸ“" "ðŸ£" "ðŸ¤" "ðŸ¥" "ðŸ¦" "ðŸ§" "ðŸ¦…" "ðŸ¦†" "ðŸ¦‰" "ðŸ¸" "ðŸŠ" "ðŸ¢" "ðŸ¦Ž" "ðŸ" "ðŸ²" "ðŸ‰" "ðŸ³" "ðŸ‹" "ðŸ¬" "ðŸŸ" "ðŸ " "ðŸ¡" "ðŸ¦ˆ" "ðŸ™" "ðŸš" "ðŸŒ" "ðŸ¦‹" "ðŸ›" "ðŸ" "ðŸž" "ðŸ’" "ðŸŒ¸" "ðŸŒ¹" "ðŸ¥€" "ðŸŒº" "ðŸŒ»" "ðŸŒ¼" "ðŸŒ·" "ðŸ‡" "ðŸˆ" "ðŸ‰" "ðŸŠ" "ðŸ‹" "ðŸŒ" "ðŸ" "ðŸŽ" "ðŸ" "ðŸ" "ðŸ‘" "ðŸ’" "ðŸ“" "ðŸ¥" "ðŸ…" "ðŸ¥‘" "ðŸ†" "ðŸ¥”" "ðŸ¥•" "ðŸŒ½" "ðŸ¥’" "ðŸ¥œ" "ðŸŒ°" "ðŸž" "ðŸ¥" "ðŸ¥–" "ðŸ¥ž" "ðŸ–" "ðŸ—" "ðŸ¥“" "ðŸ”" "ðŸŸ" "ðŸ•" "ðŸŒ­" "ðŸŒ®" "ðŸŒ¯" "ðŸ¥™" "ðŸ³" "ðŸ¥˜" "ðŸ²" "ðŸ¥—" "ðŸ¿" "ðŸ±" "ðŸ˜" "ðŸ™" "ðŸš" "ðŸ›" "ðŸœ" "ðŸ" "ðŸ " "ðŸ¢" "ðŸ£" "ðŸ¤" "ðŸ¥" "ðŸ¡" "ðŸ¦€" "ðŸ¦" "ðŸ¦‘" "ðŸ¦" "ðŸ§" "ðŸ¨" "ðŸ©" "ðŸª" "ðŸŽ‚" "ðŸ°" "ðŸ«" "ðŸ¬" "ðŸ­" "ðŸ®" "ðŸ¯" "ðŸ¼" "ðŸ¥›" "â˜•" "ðŸµ" "ðŸ¶" "ðŸ¾" "ðŸ·" "ðŸ¸" "ðŸ¹" "ðŸº" "ðŸ»" "ðŸ¥‚" "ðŸ¥ƒ" "ðŸŒ" "ðŸŒŽ" "ðŸŒ" "ðŸ—¾" "ðŸŒ‹" "ðŸ—»" "â›º" "ðŸŒ" "ðŸŒƒ" "ðŸŒ„" "ðŸŒ…" "ðŸŒ†" "ðŸŒ‡" "ðŸŒ‰" "ðŸŽ " "ðŸŽ¡" "ðŸŽ¢" "ðŸ’ˆ" "ðŸŽª" "ðŸš‚" "ðŸšƒ" "ðŸš„" "ðŸš…" "ðŸš†" "ðŸš‡" "ðŸšˆ" "ðŸš‰" "ðŸšŠ" "ðŸš" "ðŸšž" "ðŸš‹" "ðŸšŒ" "ðŸš" "ðŸšŽ" "ðŸš" "ðŸš‘" "ðŸš’" "ðŸš“" "ðŸš”" "ðŸš•" "ðŸš–" "ðŸš—" "ðŸš˜" "ðŸš™" "ðŸšš" "ðŸš›" "ðŸšœ" "ðŸ›µ" "ðŸš" "â›½" "ðŸš¨" "ðŸš¥" "ðŸš¦" "ðŸ›‘" "ðŸš§" "âš“" "â›µ" "ðŸ›¶" "ðŸš¤" "ðŸš¢" "ðŸ›«" "ðŸ›¬" "ðŸš" "ðŸšŸ" "ðŸš " "ðŸš¡" "ðŸš€" "âŒ›" "â³" "âŒš" "â°" "ðŸ•›" "ðŸ•§" "ðŸ•" "ðŸ•œ" "ðŸ•‘" "ðŸ•" "ðŸ•’" "ðŸ•ž" "ðŸ•“" "ðŸ•Ÿ" "ðŸ•”" "ðŸ• " "ðŸ••" "ðŸ•¡" "ðŸ•–" "ðŸ•¢" "ðŸ•—" "ðŸ•£" "ðŸ•˜" "ðŸ•¤" "ðŸ•™" "ðŸ•¥" "ðŸ•š" "ðŸ•¦" "ðŸŒ‘" "ðŸŒ’" "ðŸŒ“" "ðŸŒ”" "ðŸŒ•" "ðŸŒ–" "ðŸŒ—" "ðŸŒ˜" "ðŸŒ™" "ðŸŒš" "ðŸŒ›" "ðŸŒœ" "ðŸŒ" "ðŸŒž" "ðŸŒŸ" "ðŸŒ " "ðŸŒŒ" "ðŸŒ€" "ðŸŒˆ" "ðŸŒ‚" "â˜”" "âš¡" "ðŸŽƒ" "ðŸŽ„" "ðŸŽ†" "ðŸŽ‡" "âœ¨" "ðŸŽˆ" "ðŸŽ‰" "ðŸŽŠ" "ðŸŽ‹" "ðŸŽ" "ðŸŽŽ" "ðŸŽ" "ðŸŽ" "ðŸŽ‘" "ðŸŽ€" "ðŸŽ" "ðŸ†" "ðŸ…" "ðŸ¥‡" "ðŸ¥ˆ" "ðŸ¥‰" "âš½" "âš¾" "ðŸ€" "ðŸ" "ðŸˆ" "ðŸ‰" "ðŸŽ¾" "ðŸŽ³" "ðŸ" "ðŸ‘" "ðŸ’" "ðŸ“" "ðŸ¸" "ðŸ¥Š" "ðŸ¥‹" "ðŸ¥…" "â›³" "ðŸŽ£" "ðŸŽ¿" "ðŸŽ¯" "ðŸ”®" "ðŸŽ®" "ðŸŽ°" "ðŸŽ²" "ðŸ‘“" "ðŸ‘–" "ðŸ‘" "ðŸŽ’" "ðŸ‘ " "ðŸ‘¡" "ðŸ‘‘" "ðŸ‘’" "ðŸŽ©" "ðŸŽ“" "ðŸ“¿" "ðŸ’„" "ðŸ’" "ðŸ’Ž" "ðŸ”ˆ" "ðŸ”‰" "ðŸ”Š" "ðŸ“¢" "ðŸ“£" "ðŸ“¯" "ðŸ””" "ðŸ”•" "ðŸ“»" "ðŸŽ·" "ðŸŽ¸" "ðŸŽ¹" "ðŸŽº" "ðŸŽ»" "ðŸ“±" "ðŸ“²" "ðŸ“ž" "ðŸ“Ÿ" "ðŸ“ " "ðŸ”‹" "ðŸ”Œ" "ðŸ’»" "ðŸ’½" "ðŸ’¾" "ðŸ’¿" "ðŸ“€" "ðŸŽ¥" "ðŸŽ¬" "ðŸ“º" "ðŸ“·" "ðŸ“¸" "ðŸ“¹" "ðŸ“¼" "ðŸ”" "ðŸ”Ž" "ðŸ’¡" "ðŸ”¦" "ðŸ®" "ðŸ“”" "ðŸ“•" "ðŸ“–" "ðŸ“—" "ðŸ“˜" "ðŸ“™" "ðŸ“š" "ðŸ’°" "ðŸ’¸" "ðŸ”¨" "ðŸ”«" "ðŸ¹" "ðŸ”§" "ðŸ”©" "ðŸ”¬" "ðŸ”­" "ðŸ“¡" "ðŸšª" "ðŸš¿" "ðŸ›" "ðŸ›’")
NUMBER_OF_EMOJIS=${#PS1_EMOJIS[@]}
RUBY="%F{red}îˆž%F{white} $(ruby_version)"
NODE="%F{green}îœ˜%F{white} $(node_version)"
setopt PROMPT_SUBST
export PROMPT='${NEWLINE}$PROMPT_TIME %F{grey}$RUBY $NODE $(has_devbox) ${NEWLINE}%F{red}îœ‚%F{white} $(git_branch) ${NEWLINE}%F{blue}%~%F{grey} ${NEWLINE}%F{blue}~%F{grey} ${PS1_EMOJIS[$RANDOM % $NUMBER_OF_EMOJIS]} '

export PATH="/usr/local/heroku/bin:$PATH"
export PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"
export PATH="$HOME/.cargo/bin:$PATH"
export PATH="$HOME/Library/Python/3.11/bin:$PATH"

export CARGO_NET_GIT_FETCH_WITH_CLI=true
source "$HOME/.cargo/env"

source ~/.rgz.sh

export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/tools
export PATH=$PATH:$ANDROID_HOME/tools/bin
export PATH=$PATH:$ANDROID_HOME/platform-tools

if [[ -e "/opt/homebrew/bin/brew" ]]; then
  export PATH="/opt/homebrew/bin:$PATH"
  export LIBRARY_PATH="$LIBRARY_PATH:/opt/homebrew/lib"
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# asdf: try one of two locations
if [ -f "/opt/homebrew/opt/asdf/libexec/asdf.sh" ]; then
  . "/opt/homebrew/opt/asdf/libexec/asdf.sh"
fi
if [ -f "/usr/local/opt/asdf/libexec/asdf.sh" ]; then
  . "/usr/local/opt/asdf/libexec/asdf.sh"
fi

# z binary (better than cd)
eval "$(zoxide init zsh)"

# like scm_breeze but devbox compatible
eval "$(scmpuff init -s)"

# direnv
if command -v direnv &> /dev/null; then
  eval "$(direnv hook zsh)"
fi
